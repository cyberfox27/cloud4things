%!TEX root = ../dissertation.tex

\chapter{Conclusion}
\label{chapter:conclusion}

The \acrfull{IoT} is a paradigm where ordinary objects are continuously connected to the virtual
world and interacting with the surrounding environment. In order to make this environment more comfortable and
efficient, \gls{IoT} applications need to understand the context where they are inserted and also to
adapt to this environment. Thus, \gls{IoT} applications usually need to provisioning its infrastructure
in the physical place. This requirement makes that \gls{IoT} applications presents scalability
problems and also make them cost ineffective. The Utility Computing in the cloud helps to solve this
problems by leveraging part of the infrastructure of \gls{IoT} applications to the cloud. However,
\gls{IoT} applications are latency sensitive and the cloud must be able to meet this requirement.\\

The present work explores the deployment of \gls{IoT} applications in the cloud and proposes
two different approaches to deploy an \gls{IoT} application for smart warehouses based on the
\gls{RFID} technology: one based in the Fog Computing platform (fog-based) and other according a traditional
cloud deployment approach (cloud-based). More specifically, the present work focuses to determine if a cloud-based
approach is able to meet the low-latency requirements of \gls{IoT} applications. Since that low-latency
is an essential requirement of \gls{IoT} applications, if a cloud-based approach is not able to meet the
network latency requirements for those applications, the cloud platform is not a viable option to perform
the provisioning of \gls{IoT} applications.\\

The \gls{RFID} middleware platform used as the testing system was the framework Fosstrak, an EPCGlobal
compliant framework. The platform is composed of several modules that are responsible to collecting
and filtering (FCServer), interpreting (Capturing Application) and storage the event data (EPCIS Repository)
generated by the \gls{RFID} readers deployed in the smart warehouse.\\

The deployment of the \gls{RFID} middleware was performed so that the latency network between the
application middleware and the warehouse it was the lowest possible. Regarding the cloud-based approach
there is no other alternative but provisioning the middleware components in the cloud. Since the Fog
platform aims to bring the cloud to the edge of the network, that allow us to have more flexibility
to provisioning the middleware components. The modules responsible to interact with the \gls{RFID}
readers (FCServer) and interpreting the events (Capturing Application) were provisioned in the fog while the module
responsible to store the data (EPCIS Repository) were provisioned in the cloud.\\

To improve the provisioning of \gls{RFID} middleware in the cloud, we developed a mechanism based on
Docker containers and the Chef tool that automates the installation and configuration of the modules
that composes the Fosstrak platform. This mechanism was of extreme importance, since that allowed us
to perform the application provisioning in the cloud instances in a very efficient way. Although our
experiments were conducted in a single cloud provider, the developed mechanism give us the flexibility
to chose between several cloud providers to provisioning the \gls{RFID} middleware.\\

Regarding the system evaluation, we defined a methodology to evaluate the latency of an event that
occurs in the physical space. The methodology consists in measuring the response latency
of an event that is triggered in the smart warehouse. This methodology will allows us to determine
the latency of each stage of the event processing cycle (\textit{Event Cycle}) that is executed by the
FCServer. To evaluate the performed experiments we proposed the following metrics: \textit{Upload Latency},
\textit{Tag Processing Latency}, \textit{Idle Processing Latency}, \textit{Filtering \& Aggregation Latency},
\textit{Report Creation Latency}, \textit{Response Latency} and \textit{Event Latency}. These metrics allow
us to measure how much time the FCServer spent to processing each stage of an \textit{Event Cycle}.
We also defined a methodology to evaluate the data storage performance for the Fosstrak platform.
The methodology consists in stress the \gls{EPCIS} Repository by simulating several users that simultaneously
send a large amount of data. The performed experiments will allow us to measuring the network traffic
and CPU utilization in order determine if the EPCIS module is able to process large amounts of data.\\

With the methodologies proposed, we were able to compare the event latency performance for both
fog-based and cloud-based approaches. Furthermore, we are able to compare the latency of each stage
of an \textit{Event Cycle} for both approaches and determine how each deployment approach affects the
performance of these stages.\\

Regarding the \gls{RFID} scenario, two experiments were defined to evaluate the latency performance
of the fog-based and cloud-based approaches based in the work developed et. al \cite{Correia:Thesis:2014}.
In our scenario, a tagged robot that is moving around the warehouse stops in front of a closed door and
wait during $5s$. The \gls{RFID} readers that are placed near to the door must identify the robot and
trigger an event to open the door before the robot starts to moving again. Correia et. al \cite{Correia:Thesis:2014}
recorded several event sessions with Rec\&Play. The data recorded in these sessions were used to
evaluate the data storage performance of the Fosstrak platform.\\

The obtained results shows that the event latency performance presented better results when the
application was deployed according the fog-based approach. However, in the performed experiments
were identified some issues regarding the behavior of the FCServer during an \textit{Event Cycle}.
During most of the time of an \textit{Event Cycle} the FCServer remains in an idle state. This
results that the event latency performance was highly affected by this behavior. Regarding the data
storage performance of the \gls{RFID} middleware, the results show that the Fosstrak platform is
able to process with an acceptable performance the amount of data that is generated in a smart
warehouse.

% Contributions
\section{Contributions Summary}
\label{sec:contributions}

\subparagraph{RFID Smart Place Architecture.}
\label{subp:rfid_smart_place_architecture}
A deployment architecture based on the Fog Computing platform for EPCGlobal compliant \gls{RFID}
middleware platforms. We propose an architecture that focuses to improve the network latency
performance of \gls{RFID} applications by distributing the middleware components across the fog and
the cloud.

\subparagraph{Provisioning Mechanism.}
\label{subp:provisioning_mechanism}
A mechanism that automates the provisioning of \gls{RFID} application middleware in the cloud.
The provisioning mechanism allows to provisioning the Fosstrak modules in several cloud
providers. Furthermore, how it is based on Docker container images to provisioning the application
stack, it is not specific for the Fosstrak middleware and can be extended for every EPCGlobal
compliant \gls{RFID} platform.

\subparagraph{Event Cycle Metrics.}
\label{subp:event_latency_metrics}
A set of metrics to measuring the performance of the \textit{Event Cycle} that is executed by the
FCServer. The metrics allows to determine how much time the FCServer spent processing each stage of
the current \textit{Event Cycle}.

\subparagraph{Latency Interaction Performance Evaluation.}
\label{subp:event_latency_performance_eval}
Experiments were performed in order to find the best clud-based deployment approach that meet the
low-latency requirements of \gls{RFID} applications. Moreover, we compared both fog-based and cloud-based
approaches based on the \textit{Event Cycle} metrics in order to determine how the deployment
approach affects the performance of the \textit{Event Cycle} stages.

% Future Work
\section{Future Work}
\label{sec:future_work}
Although we achieved the initial goals for our work, our solution still presents some aspects that
need to be improved and other aspects that we are not able to concretize.

% Fog Implementation
\subparagraph{Fog Implementation.}
\label{subp:fog_impl}
Our solution proposes that the \gls{RFID} application is deployed following a fog-based approach.
This means that we need to have a cloud close to the edge of the network and this cloud must meet
the same requirements of a remote cloud such as high scalability, security and multi-tenancy.
Unfortunately, we were not able to accomplish a fog that meet these requirements and in our implementation
the fog was built on top of a traditional Virtual Machine.\\

% Containers Deployment
\subparagraph{Containers Deployment.}
\label{subp:containers_impl}
In the current implementation we used Docker containers to provisioning the Fosstrak software stack.
In the evaluation of our solution we deploy the containers in a \gls{EC2} \gls{VM}, which overlays two
different mechanisms of virtualization. Although we still are able to take advantage of some benefits
from the containers such as the portability, other benefits such as the low I/O and disk space are
hidden by the \gls{VM} hypervisor. A future improvement that can be made is to perform the deployment
of the containers on top of the bare-metal or a cloud-based container service - e.g. Google Kubernetes
\footnote{\url{http://kubernetes.io/}}, \gls{AWS} \gls{EC2} Container Service\footnote{\url{https://aws.amazon.com/ecs/}} -
in order to improve the overall performance of the solution.

% Cloud Providers Evaluation
\subparagraph{Cloud Providers Evaluation.}
\label{subp:cloud_eval}
The evaluation was performed only in \gls{AWS} \gls{EC2} instances. For the future is important to
evaluate our solution in other cloud providers to compare which offers the best relation
cost/performance.\\

% Latency Interaction Evaluation
\subparagraph{Latency Interaction Evaluation.}
\label{subp:latency_eval}
To evaluate the latency interaction, we defined only two different \textit{ECspecs}. For the future work,
we want to evaluate the latency performance for our solution with \textit{ECspecs} that presents smaller
periods in order to determine which specification is more suitable for our solution.\\

% Latency Interaction Evaluation
\subparagraph{Evaluation Scenario.}
\label{subp:scenario_eval}
Another limitation of our evaluation process regards with the scenario. Since that a virtual \gls{RFID}
reader was used instead of a physical one, we are not able to reproduce the environment conditions
of a real smart warehouse such as interferences in the \gls{RFID} tags antennas, network bandwidth
variations, etc. Reproducing a real smart warehouse with physical \gls{RFID} readers and antennas
will improve our evaluation process in order to obtain more accurate results.
